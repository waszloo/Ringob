!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("lodash.isequal"),require("react"),require("@inertiajs/inertia")):"function"==typeof define&&define.amd?define(["exports","lodash.isequal","react","@inertiajs/inertia"],n):n((e=e||self).InertiaReact={},e.isEqual,e.React,e.Inertia)}(this,function(e,n,r,t){n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n;var o="default"in r?r.default:r;function i(){return(i=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&(e[t]=r[t])}return e}).apply(this,arguments)}function a(e,n){var o=r.useState(function(){var r=t.Inertia.restore(n);return void 0!==r?r:e}),i=o[0],a=o[1];return r.useEffect(function(){t.Inertia.remember(i,n)},[i,n]),[i,a]}var u=r.createContext();u.displayName="InertiaPageContext";var c=r.createContext();function s(e){var n=e.children,o=e.initialPage,a=e.resolveComponent,s=e.onHeadUpdate,l=r.useState({component:e.initialComponent||null,page:o,key:null}),f=l[0],p=l[1],d=r.useMemo(function(){return t.createHeadManager("undefined"==typeof window,s||function(){})},[]);if(r.useEffect(function(){t.Inertia.init({initialPage:o,resolveComponent:a,swapComponent:function(e){var n=e.component,r=e.page,t=e.preserveState;try{return p(function(e){return{component:n,page:r,key:t?e.key:Date.now()}}),Promise.resolve()}catch(e){return Promise.reject(e)}}})},[]),!f.component)return r.createElement(c.Provider,{value:d},r.createElement(u.Provider,{value:f.page},null));var v=n||function(e){var n=e.Component,t=e.props,o=r.createElement(n,i({key:e.key},t));return"function"==typeof n.layout?n.layout(o):Array.isArray(n.layout)?n.layout.concat(o).reverse().reduce(function(e,n){return r.createElement(n,i({children:e},t))}):o};return r.createElement(c.Provider,{value:d},r.createElement(u.Provider,{value:f.page},v({Component:f.component,key:f.key,props:f.page.props})))}function l(e){var n,t,i=e.children,a=e.title,u=r.useContext(c),s=r.useMemo(function(){return u.createProvider()},[u]);return r.useEffect(function(){return function(){s.disconnect()}},[s]),s.update((n=i,t=(Array.isArray(n)?n:[n]).filter(function(e){return e}).map(function(e){return function(e){return function e(n){var r=function(e){var n=Object.keys(e.props).reduce(function(n,r){if(["head-key","children","dangerouslySetInnerHTML"].includes(r))return n;var t=e.props[r];return""===t?n+" "+r:n+" "+r+'="'+t+'"'},"");return"<"+e.type+n+">"}(n);return n.props.children&&(r+=function(n){return"string"==typeof n.props.children?n.props.children:n.props.children.reduce(function(n,r){return n+e(r)},"")}(n)),n.props.dangerouslySetInnerHTML&&(r+=n.props.dangerouslySetInnerHTML.__html),function(e){return["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"].indexOf(e.type)>-1}(n)||(r+="</"+n.type+">"),r}(function(e){return o.cloneElement(e,{inertia:void 0!==e.props["head-key"]?e.props["head-key"]:""})}(e))}(e)}),a&&!t.find(function(e){return e.startsWith("<title")})&&t.push("<title inertia>"+a+"</title>"),t)),null}c.displayName="InertiaHeadContext",s.displayName="Inertia";var f=["children","as","data","href","method","preserveScroll","preserveState","replace","only","headers","onClick","onCancelToken","onBefore","onStart","onProgress","onFinish","onCancel","onSuccess","onError"],p=function(){},d=r.forwardRef(function(e,n){var o=e.children,a=e.as,u=void 0===a?"a":a,c=e.data,s=void 0===c?{}:c,l=e.href,d=e.method,v=void 0===d?"get":d,m=e.preserveScroll,h=void 0!==m&&m,y=e.preserveState,g=void 0===y?null:y,S=e.replace,k=void 0!==S&&S,C=e.only,b=void 0===C?[]:C,P=e.headers,E=void 0===P?{}:P,I=e.onClick,w=void 0===I?p:I,T=e.onCancelToken,O=void 0===T?p:T,j=e.onBefore,x=void 0===j?p:j,L=e.onStart,H=void 0===L?p:L,R=e.onProgress,A=void 0===R?p:R,F=e.onFinish,B=void 0===F?p:F,q=e.onCancel,D=void 0===q?p:q,M=e.onSuccess,N=void 0===M?p:M,U=e.onError,J=void 0===U?p:U,W=function(e,n){if(null==e)return{};var r,t,o={},i=Object.keys(e);for(t=0;t<i.length;t++)n.indexOf(r=i[t])>=0||(o[r]=e[r]);return o}(e,f),_=r.useCallback(function(e){w(e),t.shouldIntercept(e)&&(e.preventDefault(),t.Inertia.visit(l,{data:s,method:v,preserveScroll:h,preserveState:null!=g?g:"get"!==v,replace:k,only:b,headers:E,onCancelToken:O,onBefore:x,onStart:H,onProgress:A,onFinish:B,onCancel:D,onSuccess:N,onError:J}))},[s,l,v,h,g,k,b,E,w,O,x,H,A,B,D,N,J]);u=u.toLowerCase(),v=v.toLowerCase();var Q=t.mergeDataIntoQueryString(v,l,s);return l=Q[0],s=Q[1],"a"===u&&"get"!==v&&console.warn('Creating POST/PUT/PATCH/DELETE <a> links is discouraged as it causes "Open Link in New Tab/Window" accessibility issues.\n\nPlease specify a more appropriate element using the "as" attribute. For example:\n\n<InertiaLink href="'+l+'" method="'+v+'" as="button">...</InertiaLink>'),r.createElement(u,i({},W,"a"===u?{href:l}:{},{ref:n,onClick:_}),o)});e.App=s,e.Head=l,e.InertiaApp=s,e.InertiaHead=l,e.InertiaLink=d,e.Link=d,e.app=s,e.createInertiaApp=function(e){try{var n,t,o,i,a,u;t=void 0===(n=e.id)?"app":n,o=e.resolve,i=e.setup,a=e.page,u=e.render;var c="undefined"==typeof window,l=c?null:document.getElementById(t),f=a||JSON.parse(l.dataset.page),p=function(e){return Promise.resolve(o(e)).then(function(e){return e.default||e})},d=[];return Promise.resolve(p(f.component).then(function(e){return i({el:l,App:s,props:{initialPage:f,initialComponent:e,resolveComponent:p,onHeadUpdate:c?function(e){return d=e}:null}})})).then(function(e){return function(){if(c)return Promise.resolve(u(r.createElement("div",{id:t,"data-page":JSON.stringify(f)},e))).then(function(e){return{head:d,body:e}})}()})}catch(e){return Promise.reject(e)}},e.link=d,e.useForm=function(){var e=[].slice.call(arguments),o=r.useRef(null),u="string"==typeof e[0]?e[0]:null,c=("string"==typeof e[0]?e[1]:e[0])||{},s=r.useRef(null),l=r.useRef(null),f=u?a(c,u+":data"):r.useState(c),p=f[0],d=f[1],v=u?a({},u+":errors"):r.useState({}),m=v[0],h=v[1],y=r.useState(!1),g=y[0],S=y[1],k=r.useState(!1),C=k[0],b=k[1],P=r.useState(null),E=P[0],I=P[1],w=r.useState(!1),T=w[0],O=w[1],j=r.useState(!1),x=j[0],L=j[1],H=function(e){return e};r.useEffect(function(){return o.current=!0,function(){o.current=!1}},[]);var R=r.useCallback(function(e,n,r){void 0===r&&(r={});var a=i({},r,{onCancelToken:function(e){if(s.current=e,r.onCancelToken)return r.onCancelToken(e)},onBefore:function(e){if(O(!1),L(!1),clearTimeout(l.current),r.onBefore)return r.onBefore(e)},onStart:function(e){if(b(!0),r.onStart)return r.onStart(e)},onProgress:function(e){if(I(e),r.onProgress)return r.onProgress(e)},onSuccess:function(e){if(o.current&&(b(!1),I(null),h({}),S(!1),O(!0),L(!0),l.current=setTimeout(function(){return L(!1)},2e3)),r.onSuccess)return r.onSuccess(e)},onError:function(e){if(o.current&&(b(!1),I(null),h(e),S(!0)),r.onError)return r.onError(e)},onCancel:function(){if(o.current&&(b(!1),I(null)),r.onCancel)return r.onCancel()},onFinish:function(){if(o.current&&(b(!1),I(null)),s.current=null,r.onFinish)return r.onFinish()}});"delete"===e?t.Inertia.delete(n,i({},a,{data:H(p)})):t.Inertia[e](n,H(p),a)},[p,h]);return{data:p,setData:function(e,n){var r;d("string"==typeof e?i({},p,((r={})[e]=n,r)):"function"==typeof e?function(n){return e(n)}:e)},isDirty:!n(p,c),errors:m,hasErrors:g,processing:C,progress:E,wasSuccessful:T,recentlySuccessful:x,transform:function(e){H=e},reset:function(){var e=[].slice.call(arguments);d(0===e.length?c:Object.keys(c).filter(function(n){return e.includes(n)}).reduce(function(e,n){return e[n]=c[n],e},{}))},clearErrors:function(){var e=[].slice.call(arguments);h(Object.keys(m).reduce(function(n,r){var t;return i({},n,e.length>0&&!e.includes(r)?((t={})[r]=m[r],t):{})},{})),S(Object.keys(m).length>0)},submit:R,get:function(e,n){R("get",e,n)},post:function(e,n){R("post",e,n)},put:function(e,n){R("put",e,n)},patch:function(e,n){R("patch",e,n)},delete:function(e,n){R("delete",e,n)},cancel:function(){s.current&&s.current.cancel()}}},e.usePage=function(){var e=r.useContext(u);if(!e)throw new Error("usePage must be used within the Inertia component");return e},e.useRemember=a,e.useRememberedState=function(e,n){return console.warn('The "useRememberedState" hook has been deprecated and will be removed in a future release. Use "useRemember" instead.'),a(e,n)}});
//# sourceMappingURL=index.umd.js.map
